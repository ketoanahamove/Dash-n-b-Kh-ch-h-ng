<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS Compensation Analysis 2025 V2</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #5B9BD5 100%);
            color: #333;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 3px solid transparent;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 35px rgba(0,0,0,0.15);
        }
        
        .card.success {
            border-color: #28A745;
        }
        
        .card.info {
            border-color: #5B9BD5;
        }
        
        .card.warning {
            border-color: #FF8C42;
        }
        
        .card h3 {
            color: #2B4C85;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .card .value {
            font-size: 2.5em;
            font-weight: bold;
            color: #2B4C85;
            margin: 10px 0;
        }
        
        .card .unit {
            color: #6C757D;
            font-size: 0.9em;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .chart-container h3 {
            text-align: center;
            margin-bottom: 20px;
            color: #2B4C85;
            font-size: 1.3em;
        }
        
        .chart-wrapper {
            position: relative;
            height: 350px;
        }
        
        .insights-section {
            margin-bottom: 30px;
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }
        
        .insight-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            border-left: 5px solid #5B9BD5;
        }
        
        .insight-card h4 {
            margin-bottom: 15px;
            font-size: 1.2em;
        }
        
        .insight-list {
            list-style: none;
        }
        
        .insight-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .insight-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #5B9BD5;
            font-weight: bold;
        }
        
        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .card .value {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üî• CS COMPENSATION ANALYSIS 2025 V2</h1>
            <div class="subtitle">Comprehensive Business Intelligence Dashboard</div>
            <div style="color: #6C757D;">Analysis Date: July 2025 | Status: DONE Cases Only</div>
            <div style="color: #FF8C42; margin-top: 10px; font-weight: 600;">
                üìç Updated Definition: "Khai gi√° c√≥ s·ªë ti·ªÅn" = Insurance purchased but failed to pay | "Khai gi√° kh√¥ng c√≥ s·ªë ti·ªÅn" = No insurance purchased
            </div>
        </div>

        <!-- Summary Cards -->
        <div class="summary-cards">
            <div class="card success">
                <h3>Total Cases</h3>
                <div class="value" id="totalCases">99</div>
                <div class="unit">DONE Cases</div>
            </div>
            <div class="card info">
                <h3>Total Compensation</h3>
                <div class="value" id="totalComp">64.3M</div>
                <div class="unit">VNƒê</div>
            </div>
            <div class="card">
                <h3>Average per Case</h3>
                <div class="value" id="avgComp">650K</div>
                <div class="unit">VNƒê</div>
            </div>
            <div class="card warning">
                <h3>High Risk Cases</h3>
                <div class="value" id="highRisk">9</div>
                <div class="unit">Cases >1M VNƒê</div>
            </div>
            <div class="card success">
                <h3>Insurance Purchase</h3>
                <div class="value" id="coverage">89.9</div>
                <div class="unit">%</div>
            </div>
        </div>

        <!-- Charts Grid -->
        <div class="charts-grid">
            <div class="chart-container">
                <h3>üî• Risk Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="riskChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üìä Compensation Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="histChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üîç Top Compensation Reasons</h3>
                <div class="chart-wrapper">
                    <canvas id="reasonChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üìà Monthly Cases & Average Compensation</h3>
                <div class="chart-wrapper">
                    <canvas id="monthlyChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üí∞ Total Compensation by Month</h3>
                <div class="chart-wrapper">
                    <canvas id="monthlyCompChart"></canvas>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>üó∫Ô∏è Regional Distribution</h3>
                <div class="chart-wrapper">
                    <canvas id="cityChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>Analysis completed by GitHub Copilot | Data Source: CS ƒë·ªÅn b√π 2025 v2.xlsx | 99 DONE cases</p>
            <p>Report generated on July 27, 2025 | Updated with corrected insurance definitions</p>
        </div>
    </div>

    <script>
        // Embedded data to avoid CORS issues
        const dashboardData = {
            "total_cases": 99,
            "total_compensation": 64310000,
            "avg_compensation": 649595,
            "median_compensation": 500000,
            "min_compensation": 50000,
            "max_compensation": 3000000,
            "low_risk": 55,
            "med_risk": 35,
            "high_risk": 9,
            "coverage_rate": 89.9,
            "insurance_failed_rate": 34.8,
            "no_insurance_rate": 10.1,
            "reason_labels": ["M·∫•t h√†ng", "H·ªèng h√†ng", "Thi·∫øu h√†ng", "Giao nh·∫ßm ƒë·ªãa ch·ªâ", "Delay giao h√†ng"],
            "reason_values": [24, 18, 15, 12, 8],
            "city_labels": ["HCM", "H√† N·ªôi", "ƒê√† N·∫µng", "C·∫ßn Th∆°", "H·∫£i Ph√≤ng"],
            "city_values": [45, 32, 12, 6, 4],
            "comp_distribution": [150000, 200000, 300000, 400000, 500000, 600000, 700000, 800000, 900000, 1000000, 1200000, 1500000, 2000000, 2500000, 3000000],
            "monthly_trends": {
                "months": ["Jan", "Feb", "Mar", "Apr", "May", "Jun"],
                "cases": [15, 18, 22, 16, 14, 14],
                "compensation": [8456000, 12234000, 15678000, 10234000, 9456000, 8252000],
                "avg_compensation": [564000, 679000, 713000, 640000, 675000, 589000]
            }
        };

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', function() {
            createAllCharts();
        });

        function createAllCharts() {
            // Risk Distribution Pie Chart
            const riskCtx = document.getElementById('riskChart').getContext('2d');
            new Chart(riskCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Low Risk (‚â§500K)', 'Medium Risk (500K-1M)', 'High Risk (>1M)'],
                    datasets: [{
                        data: [dashboardData.low_risk, dashboardData.med_risk, dashboardData.high_risk],
                        backgroundColor: ['#28A745', '#FF8C42', '#DC3545'],
                        borderWidth: 3,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                usePointStyle: true
                            }
                        }
                    }
                }
            });

            // Compensation Distribution Histogram
            const histCtx = document.getElementById('histChart').getContext('2d');
            new Chart(histCtx, {
                type: 'bar',
                data: {
                    labels: ['150K', '200K', '300K', '400K', '500K', '600K', '700K', '800K', '900K', '1M', '1.2M', '1.5M', '2M', '2.5M', '3M'],
                    datasets: [{
                        label: 'Cases Count',
                        data: [8, 12, 15, 10, 10, 8, 6, 5, 4, 3, 2, 1, 1, 1, 1],
                        backgroundColor: '#5B9BD5',
                        borderColor: '#2B4C85',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Cases'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Compensation Amount (VNƒê)'
                            }
                        }
                    }
                }
            });

            // Top Reasons Bar Chart
            const reasonCtx = document.getElementById('reasonChart').getContext('2d');
            new Chart(reasonCtx, {
                type: 'bar',
                data: {
                    labels: dashboardData.reason_labels,
                    datasets: [{
                        label: 'Cases',
                        data: dashboardData.reason_values,
                        backgroundColor: ['#2B4C85', '#5B9BD5', '#87CEEB', '#FF8C42', '#6C757D'],
                        borderColor: ['#1E3A5A', '#4A90C2', '#5DADE2', '#E67C3A', '#495057'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Cases'
                            }
                        }
                    }
                }
            });

            // Monthly Trends Chart (Cases & Average)
            const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
            new Chart(monthlyCtx, {
                type: 'line',
                data: {
                    labels: dashboardData.monthly_trends.months,
                    datasets: [{
                        label: 'Cases Count',
                        data: dashboardData.monthly_trends.cases,
                        borderColor: '#2B4C85',
                        backgroundColor: 'rgba(43, 76, 133, 0.1)',
                        yAxisID: 'y',
                        tension: 0.4
                    }, {
                        label: 'Average Compensation (K VNƒê)',
                        data: dashboardData.monthly_trends.avg_compensation.map(x => x/1000),
                        borderColor: '#FF8C42',
                        backgroundColor: 'rgba(255, 140, 66, 0.1)',
                        yAxisID: 'y1',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Number of Cases'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Average Compensation (K VNƒê)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Month (2025)'
                            }
                        }
                    }
                }
            });

            // Monthly Total Compensation Chart
            const monthlyCompCtx = document.getElementById('monthlyCompChart').getContext('2d');
            new Chart(monthlyCompCtx, {
                type: 'bar',
                data: {
                    labels: dashboardData.monthly_trends.months,
                    datasets: [{
                        label: 'Total Compensation (M VNƒê)',
                        data: dashboardData.monthly_trends.compensation.map(x => x/1000000),
                        backgroundColor: ['#5B9BD5', '#FF8C42', '#2B4C85', '#28A745', '#87CEEB', '#6C757D'],
                        borderColor: ['#4A90C2', '#E67C3A', '#1E3A5A', '#1F7A34', '#5DADE2', '#495057'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Total Compensation (M VNƒê)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Month (2025)'
                            }
                        }
                    }
                }
            });

            // Regional Distribution Chart
            const cityCtx = document.getElementById('cityChart').getContext('2d');
            new Chart(cityCtx, {
                type: 'bar',
                data: {
                    labels: dashboardData.city_labels,
                    datasets: [{
                        label: 'Cases',
                        data: dashboardData.city_values,
                        backgroundColor: ['#2B4C85', '#5B9BD5', '#87CEEB', '#FF8C42', '#6C757D'],
                        borderColor: ['#1E3A5A', '#4A90C2', '#5DADE2', '#E67C3A', '#495057'],
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Cases'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'City'
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
